<!doctype html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <title>Using the MailChimp API to Collect Email Signups | Noble Intent Studio</title>
  <meta name="description" content="Noble Intent Studio">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="/css/styles.css?t=1504574970691">
  <script src="/js/zepto.min.js"></script>
  <script src="/js/app.js?t=1504574970691"></script>

  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create', 'UA-88424240-1', 'auto');ga('send', 'pageview');</script>

  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="/manifest.json">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#19c4cb">
  <meta name="theme-color" content="#ffffff">

</head>  <header class="inner-content bleeder">
    <nav>
      <ul>
        <li>
          <a href="/">
            <img class="logo" src="/img/logo.png">
            <span class="sr">Noble Intent Studios</span>
          </a>
        </li>
        <li>
          <a href="/our-work" >
            Our Work
          </a>
        </li>
        <li>
          <a href="/blog" >
            Blog
          </a>
        </li>
        <li>
          <a href="/contact" >
            Contact
          </a>
        </li>
      </ul>
    </nav>
  </header><article class="blogPost inner-content">
  <h1 class="blog__title">Using the MailChimp API to Collect Email Signups</h1>
  <div class="blog__tags">
    <a href="/blog#development" class="blog__tag">development</a>
    <a href="/blog#email marketing" class="blog__tag">email marketing</a>
    <a href="/blog#api" class="blog__tag">api</a>
    <a href="/blog#mailchimp" class="blog__tag">mailchimp</a>
  </div>
  <div class="blog__date">September 29, 2015</div>
  <div class="blog__author">by Cris Noble</div>
  

<p>MailChimp provides several very simple ways to get a mailing list signup on your website. You can provide a link to users to a signup page in the MailChimp domain, you can trigger a popup with a signup form, or you can embed a form on your site. All of these methods work great and are fairly simple to set up, but have one major drawback &mdash; large third-party javascript requests which increase your page load time. If you're concerned about page speed, you're going to want to use the off-site link method. If you're concerned about engagement, you're going to want to keep users on your page. What if I told you there is a way to avoid third-party javascript requests <i>and</i> build an inline signup form to grow your MailChimp list?</p>

<h2>Introducing MailChimp's API</h2>
<p>MailChimp provides a <a href="http://kb.mailchimp.com/api" target="_blank">robust and approachable API</a> which all account levels have full access to. There is a lot you can do &mdash; manage files, <a href="http://kb.mailchimp.com/api/resources/lists/members/lists-members-collection" target="_blank">manage subscribers</a>, create lists, start campaigns, trigger automation flows, even run all kinds of reports. However, there isn't a whole lot of information out there on practical applications of the API. Let's start simple and use the API to create a form which will collect email addresses and add them to a mailing list.</p>

<h2>Building The Form</h2>
<p><i>The rest of this guide assumes two things, that you have a MailChimp account and you know how to FTP a PHP file. If you don't have a MailChimp account, you can <a href="http://eepurl.com/bc2DYj" target="_blank">sign up for one here</a>. MailChimp is our top recommendation for an email service provider &mdash; it works great for one-person teams, small companies and is even a good fit for some large companies. If you don't know how to FTP a PHP file, you may have a hard time getting this to work so feel free to leave any questions you have in the comments or email me at <a href="mailto:cris@kovalent.co" target="_blank">cris@kovalent.co.</a></i></p>

<h3>Step 1: Create a List</h3>
<p>After you <a href="https://admin.mailchimp.com" target="_blank">log in</a> to your MailChimp account, <a href="https://admin.mailchimp.com/lists/new-list/" target="_blank">create a new list</a>.</p>

<img src="/img/blog/mc-list.jpg">

<h3>Step 2: Create an API Key</h3>
<p>In order to interact with the MailChimp API, you're going to need to generate an API key. Follow <a href="http://kb.mailchimp.com/accounts/management/about-api-keys/#Find-or-Generate-Your-API-Key" target="_blank">these instructions to create your API key</a>. Make note of this key because you will need it later. Never ever post your API key on the internet or give it to someone you don't trust. This API key is as powerful as your MailChimp login credentials.</p>
<img src="/img/blog/mc-api.jpg">

<h3>Step 3: Collect More Variables</h3>
<p>You need to figure out what datacenter your account is setup for (don't worry this part is easy). Just look at the url of your browser while you're logged in. It should begin with https://<b>usX</b>.admin.mailchimp.com. Whatever that <b>usXX</b> field is for you is your datacenter. Mine is <b>us6</b>.</p>
<img src="/img/blog/mc-datacenter.jpg">
<p>Now you need to determine the ID of your mailing list. The only way I've found to do this is by going to the <a href="https://us1.api.mailchimp.com/playground/" target="_blank">API playground</a>, entering your API key, then clicking on "Lists". You should see the list that you created in <b>Step 1</b>. Click on the list, and take note of the "id".</p>
<img src="/img/blog/mc-listid.gif">

<p>At this point in the game you should be able to fill out the following list with your own values. I have filled it in with mine, so anytime you see one of my values in the code snippets, substitute it for your own.</p>
<p><script src="https://gist.github.com/crismanNoble/9bd29225856750c808a3.js"></script></p>

<h3>Step 4: Create the Necessary HTML</h3>
<p>Here is a bare minimum html stucture that will render a simple form. It will validate that the email looks like an email, require that the email field is filled out, and work even if javascript is disabled in the browser. The one piece of the code that you will need to change is the <b>ACTION="./endpoint"</b> attribute. It should be wherever your PHP will live, covered in the next step.</p>
<p>
<script src="https://gist.github.com/crismanNoble/6f2845243148f67b5b58.js"></script>
</p>

<h3>Step 5: Create the PHP File</h3>
<p>The PHP file will talk directly to the MailChimp API and will do the bulk of the work of adding a subscriber to your list. It will also return the JSON which MailChimp returns back to the front-end javascript so that we can provide some rudimentary error handling. You need to upload this file to a webserver. Wherever you upload the file to, you need to change the <b>ACTION="./endpoint"</b> attribute in your html to point at this php file on your server.</p>
<p>
<script src="https://gist.github.com/crismanNoble/1be4cd946bd8b94e0454.js"></script>
</p>

<h3>Step 6: Use jQuery to Submit the Form</h3>
<p>The form will work without javascript, but it works a whole lot better with a touch of jQuery. With this little javascript snippet we are preventing a page refresh, sending the form data, and then telling the user what happened based on the response from the PHP file.
<p><script src="https://gist.github.com/crismanNoble/42fc1c6c7d0b20bba8bb.js"></script></p>

<h3>Try it Out</h3>
<p>Don't worry, this form is for testing only, we won't send you any emails if you sign up to this list. If you do want to recieve our quarterly emails, sign up to our mailing list in our footer.</p>
<form method="POST" action="/nodes/mc/example/" style="border:1px solid #333; padding:10px; display:inline-block;margin-top:10px; margin-bottom:10px;" class="mc-form-example">
  <h4 style="padding-top:0;margin-top:0">Newsletter Sign Up</h4>
  <label for="mc-email">Email Address:</label><br/>
  <input type="email" id="mc-email" name="mc-email" required style="border-radius:0!important;;box-shadow:none!important;border:0;border-bottom:1px solid #333;" placeholder="em@il.address"/><br/>
  <input type="text" value="pending" id="status" name="status" style="display:none"/>
  <input type="submit" value="Submit">
</form>

<script>
$('document').ready(function(){
  $('.mc-form-example').submit(function(e){

    //prevent the form from submitting via the browser redirect
    e.preventDefault();

    //grab attributes and values out of the form
    var data = {email: $('#mc-email').val()};
    var endpoint = $(this).attr('action');

    //make the ajax request
    $.ajax({
      method: 'POST',
      dataType: "json",
      url: endpoint,
      data: data
    }).success(function(data){
      if(data.id){
        //successful adds will have an id attribute on the object
        alert('thanks for signing up');
      } else if (data.title == 'Member Exists') {
        //MC wil send back an error object with "Member Exists" as the title
        alert('thanks, but you are alredy signed up');
      } else {
        //something went wrong with the API call
        alert('oh no, there has been a problem');
      }
    }).error(function(){
      //the AJAX function returned a non-200, probably a server problem
      alert('oh no, there has been a problem');
    });
  });
});
</script>

<br/>
<p>The form above uses the exact same HTML/JavaScript/PHP code that we just went over, and it might be ugly, but it works. I leave it as an exercise to the user to figure out how to make it look pretty. Was that easier than using MailChimp's built in form snippets? No. Was it more fun? Yes. Can we remove one more network request, and reduce the page load size? Yes!</p>

  <div class="author">
  <!--todo-->
  </div>
  <a href="/blog" class="btn blog__back">Back To All Posts?</a>
  <div class="comments">
  <div id="disqus_thread"></div>
    <script>
      var disqus_config = function () {
      this.page.url = 'http://nobleintentstudio.com/blog/mailchimp-api-example';  
      this.page.identifier = 'Using the MailChimp API to Collect Email Signups | Kovalent Blog';
      };
      (function() {
      var d = document, s = d.createElement('script');
      s.src = '//kovalent.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
      })();
    </script>
                                    
  </div>

</article><footer>
  <div class="inner-content">
    <h1 class="main-heading">Get In Touch.</h1>
    <div class="grid-wrapper">
      <div class="column-half">
        <p>Subscribe to our mailing list.</p>
        <form action="https://nobleintentstudio.glitch.me/subscribe" method="POST" data-thanks="Thank you for subscribing to our email list. We promise not to spam you.">
          <label for="email">Email Address</label>
          <input type="email" placeholder="email address" name="email" id="email">
          <input type="submit" name="submit" value="subscribe" id="subscribe">
        </form>
      </div>
      <div class="column-half">
        <p>Send us a message.</p>
        <form action="https://nobleintentstudio.glitch.me/contact" method="POST" data-thanks="Thank you for for submitting your message, we will get back to you as soon as possible.">
          <label for="msg-name">Name</label>
          <input type="text" placeholder="name" name="msg-name" id="msg-name">
          <label for="msg-email">Email</label>
          <input type="email" placeholder="email address" name="msg-email" id="msg-email">
          <label for="msg-message">Message</label>
          <textarea name="msg-message" id="msg-message" placeholder="message"></textarea>
          <input type="submit" name="submit" value="submit" id="msg-submit">
        </form>
      </div>
    </div>
    <div class="social">
      <a href="https://www.facebook.com/nobleintentstudio">
        <img src="/img/facebook-icon.png">
        <span class="sr">facebook</span>
      </a>
      <a href="http://instagram.com/nobleintentstudio">
        <img src="/img/instagram-icon.png">
        <span class="sr">instagram</span>
      </a>
      <a href="https://twitter.com/noble_intent">
        <img src="/img/twitter-icon.png">
        <span class="sr">twitter</span>
      </a>
    </div>
    <div class="meta">
      <p>Noble Intent Studio</p>
      <p><span class="mobile-full">Highland Avenue &amp; El Cajon Boulevard</span><span class="mobile-hide">, </span><span class="mobile-full">San Diego, CA, 92115</span></p>
      <p><a href="tel:16197191769">+1 619 719 1769</a> | <a href="mailto:info@nobleintentstudio.com">info@nobleintentstudio.com</a></p>
    </div>
  </div>
</footer></body>